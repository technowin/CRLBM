# Generated by Django 5.0.9 on 2025-11-03 05:51

import django.core.validators
import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('CMS', '0001_initial'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='VendorCategory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100)),
                ('description', models.TextField(blank=True)),
            ],
            options={
                'verbose_name_plural': 'Vendor Categories',
            },
        ),
        migrations.CreateModel(
            name='Vendor',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('vendor_code', models.CharField(blank=True, max_length=20, unique=True)),
                ('company_type', models.CharField(choices=[('proprietorship', 'Proprietorship'), ('partnership', 'Partnership Firm'), ('private_limited', 'Private Limited Company'), ('public_limited', 'Public Limited Company'), ('llp', 'Limited Liability Partnership'), ('cooperative', 'Co-Operative Society'), ('huf', 'HUF'), ('govt_undertaking', 'Govt. Of India Undertaking'), ('state_govt', 'State Govt. Undertaking'), ('other', 'Other')], max_length=20)),
                ('company_name', models.CharField(max_length=200)),
                ('display_name', models.CharField(help_text='Name to be printed on cheques', max_length=200)),
                ('create_ledger', models.BooleanField(default=True)),
                ('vendor_types', models.JSONField(default=list)),
                ('work_description', models.CharField(blank=True, choices=[('material_supplier', 'Material Supplier'), ('service_provider', 'Service Provider'), ('labour_supplier', 'Labour Supplier'), ('general_contractor', 'General Contractor')], max_length=20)),
                ('pan_number', models.CharField(max_length=10, unique=True, validators=[django.core.validators.RegexValidator('^[A-Z]{5}[0-9]{4}[A-Z]{1}$', 'Enter a valid PAN number')])),
                ('pan_copy', models.FileField(blank=True, null=True, upload_to='vendor_docs/pan/%Y/%m/')),
                ('is_msme', models.BooleanField(default=False)),
                ('msme_type', models.CharField(blank=True, choices=[('M', 'Micro'), ('S', 'Small'), ('D', 'Medium'), ('G', 'General'), ('T', 'Not Applicable')], max_length=1)),
                ('msme_number', models.CharField(blank=True, max_length=50)),
                ('msme_certificate', models.FileField(blank=True, null=True, upload_to='vendor_docs/msme/%Y/%m/')),
                ('msme_validity', models.DateField(blank=True, null=True)),
                ('establishment_date', models.DateField(blank=True, null=True)),
                ('commencement_date', models.DateField(blank=True, null=True)),
                ('payment_preference', models.CharField(blank=True, choices=[('cash', 'By Cash'), ('cheque', 'By Cheque'), ('dd', 'By Demand Draft'), ('rtgs', 'By RTGS')], max_length=10)),
                ('registered_with_bluechip', models.BooleanField(blank=True, null=True)),
                ('responsibility_return_replace', models.BooleanField(blank=True, null=True)),
                ('vendor_group', models.CharField(blank=True, max_length=100)),
                ('status', models.CharField(choices=[('draft', 'Draft'), ('submitted', 'Submitted for Review'), ('under_review', 'Under Review'), ('approved', 'Approved'), ('rejected', 'Rejected'), ('on_hold', 'On Hold')], default='draft', max_length=20)),
                ('is_active', models.BooleanField(default=True)),
                ('is_blacklisted', models.BooleanField(default=False)),
                ('blacklist_reason', models.TextField(blank=True)),
                ('blacklist_date', models.DateField(blank=True, null=True)),
                ('submitted_date', models.DateTimeField(blank=True, null=True)),
                ('reviewed_date', models.DateTimeField(blank=True, null=True)),
                ('approved_date', models.DateTimeField(blank=True, null=True)),
                ('approval_notes', models.TextField(blank=True)),
                ('rejection_reason', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('country', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='CMS.countrymaster')),
                ('created_by', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='created_vendors', to=settings.AUTH_USER_MODEL)),
                ('current_assigned_to', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assigned_vendors', to=settings.AUTH_USER_MODEL)),
                ('reviewed_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='reviewed_vendors', to=settings.AUTH_USER_MODEL)),
                ('category', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='vendors.vendorcategory')),
            ],
            options={
                'ordering': ['company_name'],
                'permissions': [('can_submit_vendor', 'Can submit vendor for approval'), ('can_review_vendor', 'Can review vendor registration'), ('can_approve_vendor', 'Can approve vendor registration'), ('can_reject_vendor', 'Can reject vendor registration'), ('can_blacklist_vendor', 'Can blacklist vendor')],
            },
        ),
        migrations.CreateModel(
            name='VendorApprovalLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('action', models.CharField(choices=[('submitted', 'Submitted'), ('reviewed', 'Reviewed'), ('approved', 'Approved'), ('rejected', 'Rejected'), ('blacklisted', 'Blacklisted')], max_length=20)),
                ('performed_at', models.DateTimeField(auto_now_add=True)),
                ('notes', models.TextField(blank=True)),
                ('performed_by', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to=settings.AUTH_USER_MODEL)),
                ('vendor', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='approval_logs', to='vendors.vendor')),
            ],
            options={
                'ordering': ['-performed_at'],
            },
        ),
        migrations.CreateModel(
            name='VendorBankDetail',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('company_name', models.CharField(max_length=200)),
                ('bank_name', models.CharField(max_length=200)),
                ('branch_name', models.CharField(max_length=200)),
                ('city', models.CharField(max_length=100)),
                ('account_number', models.CharField(max_length=50)),
                ('account_type', models.CharField(blank=True, choices=[('savings', 'Savings Account'), ('current', 'Current Account'), ('cc', 'Cash Credit'), ('od', 'Overdraft')], max_length=10)),
                ('ifsc_code', models.CharField(max_length=11, validators=[django.core.validators.RegexValidator('^[A-Z]{4}0[0-9]{6}$', 'Enter a valid IFSC code')])),
                ('micr_code', models.CharField(blank=True, max_length=9, validators=[django.core.validators.RegexValidator('^[0-9]{9}$', 'Enter a valid MICR code')])),
                ('swift_code', models.CharField(blank=True, max_length=11)),
                ('iban_code', models.CharField(blank=True, max_length=34)),
                ('bankers_details', models.TextField(blank=True)),
                ('bank_proof', models.FileField(blank=True, null=True, upload_to='vendor_docs/bank/%Y/%m/')),
                ('is_active', models.BooleanField(default=True)),
                ('is_primary', models.BooleanField(default=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('vendor', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='bank_details', to='vendors.vendor')),
            ],
            options={
                'ordering': ['-is_primary', 'bank_name'],
            },
        ),
        migrations.CreateModel(
            name='VendorConcernPerson',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('branch', models.CharField(help_text='Branch or department', max_length=200)),
                ('concern_for', models.CharField(choices=[('billing', 'Billing'), ('payment', 'Payment'), ('project', 'Project'), ('site', 'Site'), ('technical', 'Technical'), ('commercial', 'Commercial'), ('other', 'Other')], max_length=20)),
                ('name', models.CharField(max_length=240)),
                ('designation', models.CharField(blank=True, max_length=240)),
                ('mobile_1', models.CharField(max_length=10, validators=[django.core.validators.RegexValidator('^[6-9][0-9]{9}$', 'Enter a valid mobile number')])),
                ('mobile_2', models.CharField(blank=True, max_length=10, validators=[django.core.validators.RegexValidator('^[6-9][0-9]{9}$', 'Enter a valid mobile number')])),
                ('office_phone', models.CharField(blank=True, max_length=12, validators=[django.core.validators.RegexValidator('^[0-9]{10,12}$', 'Enter a valid phone number')])),
                ('company_email', models.EmailField(blank=True, max_length=254)),
                ('personal_email', models.EmailField(blank=True, max_length=254)),
                ('is_active', models.BooleanField(default=True)),
                ('is_primary', models.BooleanField(default=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('vendor', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='concern_persons', to='vendors.vendor')),
            ],
            options={
                'verbose_name': 'Concern Person',
                'verbose_name_plural': 'Concern Persons',
                'ordering': ['-is_primary', 'concern_for'],
            },
        ),
        migrations.CreateModel(
            name='VendorContact',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('contact_type', models.CharField(choices=[('branch', 'Branch'), ('factory', 'Factory'), ('godown', 'Godown/Depot'), ('head_office', 'Head Office'), ('registered_office', 'Registered Office'), ('workshop', 'Workshop/Service Center')], max_length=20)),
                ('address', models.TextField()),
                ('gst_number', models.CharField(max_length=15, validators=[django.core.validators.RegexValidator('^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$', 'Enter a valid GST number')])),
                ('pincode', models.CharField(max_length=6, validators=[django.core.validators.RegexValidator('^[1-9][0-9]{5}$', 'Enter a valid pincode')])),
                ('location', models.CharField(blank=True, max_length=100)),
                ('telephone', models.CharField(max_length=12, validators=[django.core.validators.RegexValidator('^[0-9]{10,12}$', 'Enter a valid telephone number')])),
                ('fax', models.CharField(blank=True, max_length=12, validators=[django.core.validators.RegexValidator('^[0-9]{10,12}$', 'Enter a valid fax number')])),
                ('working_time_from', models.TimeField(default='10:00:00')),
                ('working_time_to', models.TimeField(default='19:00:00')),
                ('weekly_holidays', models.JSONField(default=list)),
                ('gst_certificate', models.FileField(blank=True, null=True, upload_to='vendor_docs/gst/%Y/%m/')),
                ('is_primary', models.BooleanField(default=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('state', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='CMS.stateutmaster')),
                ('vendor', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='contacts', to='vendors.vendor')),
            ],
            options={
                'ordering': ['-is_primary', 'contact_type'],
            },
        ),
        migrations.CreateModel(
            name='VendorCustomerReference',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('customer_name', models.CharField(max_length=200)),
                ('percentage', models.DecimalField(decimal_places=2, help_text='Percentage of total business', max_digits=5, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('vendor', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='customer_references', to='vendors.vendor')),
            ],
            options={
                'verbose_name': 'Customer Reference',
                'verbose_name_plural': 'Customer References',
                'ordering': ['-percentage'],
            },
        ),
        migrations.CreateModel(
            name='VendorDealership',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('company_name', models.CharField(max_length=200)),
                ('product', models.CharField(max_length=200)),
                ('territory', models.CharField(max_length=200)),
                ('since', models.CharField(help_text='Year or date since dealership', max_length=50)),
                ('vendor', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='dealerships', to='vendors.vendor')),
            ],
            options={
                'verbose_name': 'Dealership',
                'verbose_name_plural': 'Dealerships',
            },
        ),
        migrations.CreateModel(
            name='VendorDocument',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('document_type', models.CharField(choices=[('pan', 'PAN Card'), ('gst', 'GST Certificate'), ('msme', 'MSME Certificate'), ('bank', 'Bank Proof'), ('incorporation', 'Certificate of Incorporation'), ('quality', 'Quality Certificate'), ('other', 'Other')], max_length=20)),
                ('file', models.FileField(upload_to='vendor_docs/%Y/%m/')),
                ('uploaded_at', models.DateTimeField(auto_now_add=True)),
                ('description', models.TextField(blank=True)),
                ('is_verified', models.BooleanField(default=False)),
                ('vendor', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='documents', to='vendors.vendor')),
            ],
            options={
                'ordering': ['-uploaded_at'],
            },
        ),
        migrations.CreateModel(
            name='VendorManpower',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('total_strength', models.PositiveIntegerField(default=0)),
                ('resident_managers', models.PositiveIntegerField(default=0)),
                ('resident_managers_qualification', models.TextField(blank=True)),
                ('resident_managers_experience', models.TextField(blank=True)),
                ('site_engineers', models.PositiveIntegerField(default=0)),
                ('site_engineers_qualification', models.TextField(blank=True)),
                ('site_engineers_experience', models.TextField(blank=True)),
                ('quality_engineers', models.PositiveIntegerField(default=0)),
                ('quality_engineers_qualification', models.TextField(blank=True)),
                ('quality_engineers_experience', models.TextField(blank=True)),
                ('safety_coordinators', models.PositiveIntegerField(default=0)),
                ('safety_coordinators_qualification', models.TextField(blank=True)),
                ('safety_coordinators_experience', models.TextField(blank=True)),
                ('supervisors', models.PositiveIntegerField(default=0)),
                ('supervisors_qualification', models.TextField(blank=True)),
                ('supervisors_experience', models.TextField(blank=True)),
                ('skilled_workmen', models.PositiveIntegerField(default=0)),
                ('skilled_workmen_qualification', models.TextField(blank=True)),
                ('skilled_workmen_experience', models.TextField(blank=True)),
                ('others', models.PositiveIntegerField(default=0)),
                ('others_qualification', models.TextField(blank=True)),
                ('others_experience', models.TextField(blank=True)),
                ('vendor', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='manpower', to='vendors.vendor')),
            ],
        ),
        migrations.CreateModel(
            name='VendorQualitySystem',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('system_name', models.CharField(max_length=200)),
                ('certificate_number', models.CharField(max_length=100)),
                ('valid_upto', models.DateField()),
                ('certificate_file', models.FileField(blank=True, null=True, upload_to='vendor_docs/quality/%Y/%m/')),
                ('vendor', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='quality_systems', to='vendors.vendor')),
            ],
            options={
                'ordering': ['-valid_upto'],
            },
        ),
        migrations.CreateModel(
            name='VendorReference',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('scip_employee_name', models.CharField(blank=True, max_length=200)),
                ('scip_employee_relation', models.CharField(blank=True, max_length=100)),
                ('ex_scip_employee_name', models.CharField(blank=True, max_length=200)),
                ('ex_scip_employee_designation', models.CharField(blank=True, max_length=200)),
                ('ex_scip_employee_department', models.CharField(blank=True, max_length=200)),
                ('vendor', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='references', to='vendors.vendor')),
            ],
            options={
                'verbose_name': 'Vendor Reference',
                'verbose_name_plural': 'Vendor References',
            },
        ),
        migrations.CreateModel(
            name='VendorSisterConcern',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('company_name', models.CharField(max_length=200)),
                ('address', models.TextField()),
                ('pincode', models.CharField(max_length=6, validators=[django.core.validators.RegexValidator('^[1-9][0-9]{5}$', 'Enter a valid pincode')])),
                ('location', models.CharField(blank=True, max_length=100)),
                ('contact_person', models.CharField(blank=True, max_length=200)),
                ('telephone', models.CharField(max_length=12, validators=[django.core.validators.RegexValidator('^[0-9]{10,12}$', 'Enter a valid telephone number')])),
                ('fax', models.CharField(blank=True, max_length=12, validators=[django.core.validators.RegexValidator('^[0-9]{10,12}$', 'Enter a valid fax number')])),
                ('email', models.EmailField(blank=True, max_length=254)),
                ('website', models.URLField(blank=True)),
                ('vendor', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='sister_concerns', to='vendors.vendor')),
            ],
            options={
                'verbose_name': 'Sister Concern',
                'verbose_name_plural': 'Sister Concerns',
            },
        ),
        migrations.CreateModel(
            name='VendorStatutory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('service_tax_reg_no', models.CharField(blank=True, max_length=100)),
                ('vat_reg_no', models.CharField(blank=True, max_length=100)),
                ('vat_reg_date', models.DateField(blank=True, null=True)),
                ('pf_reg_no', models.CharField(blank=True, max_length=100)),
                ('cpwd_registered', models.BooleanField(default=False)),
                ('cpwd_details', models.TextField(blank=True)),
                ('gst_number', models.CharField(blank=True, max_length=15, validators=[django.core.validators.RegexValidator('^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$', 'Enter a valid GST number')])),
                ('vendor', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='statutory_details', to='vendors.vendor')),
            ],
            options={
                'verbose_name_plural': 'Vendor statutory details',
            },
        ),
        migrations.CreateModel(
            name='VendorFinancialInfo',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('year', models.CharField(max_length=4, validators=[django.core.validators.RegexValidator('^[0-9]{4}$', 'Enter a valid year')])),
                ('share_capital_reserves', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True)),
                ('sales_turnover', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True)),
                ('cash_profit', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True)),
                ('vendor', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='financial_info', to='vendors.vendor')),
            ],
            options={
                'ordering': ['-year'],
                'unique_together': {('vendor', 'year')},
            },
        ),
    ]
